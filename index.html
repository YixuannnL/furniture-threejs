<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Three.js Furniture Example with Connection & Interaction</title>
	<style>
		body {
			margin: 0;
			padding: 0;
		}

		canvas {
			display: block;
		}

		#ui-panel {
			position: absolute;
			top: 10px;
			left: 10px;
			background-color: rgba(255, 255, 255, 0.7);
			padding: 10px;
			border: 1px solid #888;
			font-family: sans-serif;
			font-size: 14px;
			max-width: 250px;
		}

		button {
			margin: 4px 0;
		}

		#connectionLog {
			margin-top: 10px;
			border-top: 1px solid #888;
			padding-top: 10px;
			max-height: 200px;
			overflow-y: auto;
		}

		.conn-item {
			margin-bottom: 5px;
			border-bottom: 1px dotted #888;
			padding-bottom: 5px;
		}

		.stretch-panel {
			margin-top: 6px;
			border: 1px dashed #888;
			padding: 6px;
		}

		/* 新增：显示拉伸后尺寸更新的区域 */
		#dimensionChanges {
			margin-top: 10px;
			border-top: 1px solid #888;
			padding-top: 10px;
			max-height: 150px;
			overflow-y: auto;
		}

		#rightContainer {
			position: absolute;
			top: 10px;
			right: 10px;
			width: 320px;
		}

		#treePanel {
			width: 300px;
			max-height: 56vh;
			overflow: auto;
			background: rgba(255, 255, 255, 0.7);
			border: 1px solid #999;
			padding: 10px;
			font-size: 14px;
			margin-bottom: 10px;
		}

		#overlapHint {
			width: 300px;
			background-color: rgba(255, 255, 255, 0.7);
			max-height: 28vh;
			overflow: auto;
			border: 1px solid #888;
			padding: 10px;
			font-family: sans-serif;
			font-size: 14px;
			z-index: 9999;
		}
	</style>
</head>

<body>
	<div id="selectedMeshDisplay" style="
    position:absolute; 
    top:5px; 
    left:50%; 
    transform: translateX(-50%);
    background-color: rgba(255,255,255,0.8);
    border: 1px solid #888;
    padding: 5px;
    z-index: 9999;
    font-family: sans-serif;
    font-size: 14px;">
		No mesh selected
	</div>

	<div id="ui-panel">
		<div>Mode:</div>
		<button id="connectModeBtn">Connect Parts</button>
		<button id="stretchModeBtn">Stretch Dimension</button>
		<div id="info"></div>

		<!-- 新增：显示/编辑“拉伸”数据的区域 -->
		<!-- <div id="stretchPanel" class="stretch-panel" style="display:none;">
			<div><strong>Selected Face Info</strong></div>
			<div>Object: <span id="stretchObjectName"></span></div>
			<div>Face Axis: <span id="stretchFaceAxis"></span></div>
			<div>Current Size: <span id="stretchCurrentSize">0</span> mm</div>
			<div>
				New Size:
				<input type="number" id="stretchSizeInput" style="width:80px;" /> mm
			</div>
			<button id="applyStretchBtn">Apply</button>
		</div> -->

		<div id="connectionLog">
			<div><strong>Connections:</strong></div>
			<!-- 连接记录项将注入到这里 -->
		</div>
		<!-- 新增：尺寸变化记录面板 -->
		<div id="dimensionChanges" style="display:none;">
			<strong>Dimension Changes:</strong>
			<div id=" dimensionLogInner"></div>
		</div>

	</div>

	<div id="rightContainer">
		<div id="treePanel">
			<!-- 动态生成树形内容 -->
		</div>
		<div id="overlapHint">
			<strong>Overlapping Meshes:</strong>
			<div id="overlapList">检测中……</div>
		</div>
	</div>


	<button id="exportBtn" style="position:absolute; bottom:40px; right:360px;">Export Connections</button>

	<script type="module" src="main.js"></script>

</body>

</html>